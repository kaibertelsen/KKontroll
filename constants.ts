
import { CompanyData } from './types';

// Helper to distribute budget evenly
const distribute = (total: number) => Array(12).fill(Math.round(total / 12));

// Helper for random date in current month
const currentDate = '21.11.23';

export const INITIAL_DATA: CompanyData[] = [
  {
    id: 1,
    name: 'BCC',
    fullName: 'Bergen Bcc',
    manager: 'Kai Bertelsen',
    revenue: 3200000,
    expenses: 2400000,
    resultYTD: 800000,
    budgetTotal: 750000,
    budgetMode: 'annual',
    budgetMonths: distribute(750000),
    liquidity: 450000,
    receivables: 150000,
    accountsPayable: 80000,
    publicFees: 45000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '15.11.2023',
    lastReportBy: 'Kai Bertelsen',
    comment: 'Stabil drift, ligger litt over budsjett.',
    trendHistory: 5.2,
    prevLiquidity: 420000,
    prevDeviation: 3.0
  },
  {
    id: 2,
    name: 'PHR',
    fullName: 'Panorama Hotell & Spa',
    manager: 'Ingrid Moe',
    revenue: 12500000,
    expenses: 11200000,
    resultYTD: 1300000,
    budgetTotal: 2000000,
    budgetMode: 'monthly',
    // Seasonal budget (high summer/winter)
    budgetMonths: [100000, 100000, 150000, 150000, 200000, 250000, 300000, 250000, 200000, 150000, 100000, 50000],
    liquidity: 850000,
    receivables: 450000,
    accountsPayable: 320000,
    publicFees: 120000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '18.11.2023',
    lastReportBy: 'Ingrid Moe',
    comment: 'Høysesong ga gode tall, men strømkostnader drar ned.',
    trendHistory: -2.5,
    prevLiquidity: 900000,
    prevDeviation: -5.0
  },
  {
    id: 3,
    name: 'ME',
    fullName: 'Marsteinen Eiendomselskap AS',
    manager: 'Ole Hansen',
    revenue: 4500000,
    expenses: 3100000,
    resultYTD: 1400000,
    budgetTotal: 1500000,
    budgetMode: 'annual',
    budgetMonths: distribute(1500000),
    liquidity: 120000,
    receivables: 50000,
    accountsPayable: 200000,
    publicFees: 35000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '10.11.2023',
    lastReportBy: 'Ole Hansen',
    comment: 'Store vedlikeholdskostnader denne måneden.',
    trendHistory: -8.4,
    prevLiquidity: 350000,
    prevDeviation: 1.0
  },
  {
    id: 4,
    name: 'KO',
    fullName: 'Kystopplevelser AS',
    manager: 'Lise Berg',
    revenue: 890000,
    expenses: 950000,
    resultYTD: -60000,
    budgetTotal: 100000,
    budgetMode: 'quarterly',
    budgetMonths: [...Array(3).fill(0), ...Array(3).fill(20000), ...Array(3).fill(50000), ...Array(3).fill(10000)],
    liquidity: 45000,
    receivables: 20000,
    accountsPayable: 35000,
    publicFees: 5000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '14.11.2023',
    lastReportBy: 'Lise Berg',
    comment: 'Lavsesong, tærer på likviditeten.',
    trendHistory: -15.0,
    prevLiquidity: 80000,
    prevDeviation: -25.0
  },
  {
    id: 5,
    name: 'BPS',
    fullName: 'Bergen Prosjektservice AS',
    manager: 'David Eriksen',
    revenue: 5800000,
    expenses: 4200000,
    resultYTD: 1600000,
    budgetTotal: 1400000,
    budgetMode: 'quarterly',
    budgetMonths: distribute(1400000),
    liquidity: 780000,
    receivables: 350000,
    accountsPayable: 210000,
    publicFees: 95000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '16.11.2023',
    lastReportBy: 'David Eriksen',
    comment: 'Full ordrebok og god fremdrift.',
    trendHistory: 10.5,
    prevLiquidity: 650000,
    prevDeviation: 8.0
  },
  {
    id: 6,
    name: 'VPS',
    fullName: 'Vestlands Prosjektservice',
    manager: 'Anna Hansen',
    revenue: 3500000,
    expenses: 2260000,
    resultYTD: 1240000,
    budgetTotal: 1200000,
    budgetMode: 'annual',
    budgetMonths: distribute(1200000),
    liquidity: 540000,
    receivables: 120000,
    accountsPayable: 85000,
    publicFees: 60000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '15.11.2023',
    lastReportBy: 'Anna Hansen',
    comment: 'Solid kvartal, god kontroll på utgiftene.',
    trendHistory: 12.5,
    prevLiquidity: 490000,
    prevDeviation: 5.0
  },
  {
    id: 7,
    name: 'HH',
    fullName: 'Hellehaugen Gård',
    manager: 'Erik Solbakken',
    revenue: 950000,
    expenses: 640000,
    resultYTD: 310000,
    budgetTotal: 300000,
    budgetMode: 'annual',
    budgetMonths: distribute(300000),
    liquidity: 95000,
    receivables: 30000,
    accountsPayable: 25000,
    publicFees: 8000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '10.11.2023',
    lastReportBy: 'Erik Solbakken',
    comment: 'Jevn drift.',
    trendHistory: 2.1,
    prevLiquidity: 90000,
    prevDeviation: 1.5
  },
  {
    id: 8,
    name: 'BUK',
    fullName: 'Brunstad Ungdomsklubb',
    manager: 'Frida Karlsen',
    revenue: 450000,
    expenses: 400000,
    resultYTD: 50000,
    budgetTotal: 0,
    budgetMode: 'annual',
    budgetMonths: distribute(0),
    liquidity: 230000,
    receivables: 10000,
    accountsPayable: 5000,
    publicFees: 0,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '15.11.2023',
    lastReportBy: 'Frida Karlsen',
    comment: 'Frivillig innsats holder kostnadene nede.',
    trendHistory: 0.0,
    prevLiquidity: 220000,
    prevDeviation: 0.0
  },
  {
    id: 9,
    name: 'HW',
    fullName: 'HockeyVest',
    manager: 'Gunnar Lunde',
    revenue: 1800000,
    expenses: 1900000,
    resultYTD: -100000,
    budgetTotal: 100000,
    budgetMode: 'monthly',
    budgetMonths: distribute(100000),
    liquidity: 70000,
    receivables: 40000,
    accountsPayable: 95000,
    publicFees: 15000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '09.11.2023',
    lastReportBy: 'Gunnar Lunde',
    comment: 'Dyrere baneleie enn forventet.',
    trendHistory: -18.0,
    prevLiquidity: 120000,
    prevDeviation: -10.0
  },
  {
    id: 10,
    name: 'MIL',
    fullName: 'Marsteinen Idrettslag',
    manager: 'Hanne Sørheim',
    revenue: 2100000,
    expenses: 1800000,
    resultYTD: 300000,
    budgetTotal: 300000,
    budgetMode: 'annual',
    budgetMonths: distribute(300000),
    liquidity: 610000,
    receivables: 80000,
    accountsPayable: 20000,
    publicFees: 30000,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '16.11.2023',
    lastReportBy: 'Hanne Sørheim',
    comment: 'God medlemsvekst.',
    trendHistory: 5.5,
    prevLiquidity: 580000,
    prevDeviation: 0.0
  },
  {
    id: 11,
    name: 'SCB',
    fullName: 'Seasound Choir and Band',
    manager: 'Tone Larsen',
    revenue: 320000,
    expenses: 280000,
    resultYTD: 40000,
    budgetTotal: 20000,
    budgetMode: 'annual',
    budgetMonths: distribute(20000),
    liquidity: 150000,
    receivables: 5000,
    accountsPayable: 2000,
    publicFees: 0,
    liquidityDate: currentDate,
    receivablesDate: currentDate,
    accountsPayableDate: currentDate,
    publicFeesDate: currentDate,
    lastReportDate: '20.11.2023',
    lastReportBy: 'Tone Larsen',
    comment: 'Vellykket julekonsert ga overskudd.',
    trendHistory: 15.0,
    prevLiquidity: 130000,
    prevDeviation: 10.0
  }
];

export const formatCurrency = (value: number): string => {
  const absValue = Math.abs(value);
  
  // Format large numbers with "M"
  if (absValue >= 1000000) {
    const inMillions = value / 1000000;
    // Use 1 decimal if needed (e.g. 1.2 M), otherwise 0 (e.g. 5 M)
    return new Intl.NumberFormat('no-NO', {
      style: 'decimal',
      minimumFractionDigits: 0,
      maximumFractionDigits: 1,
    }).format(inMillions) + ' M';
  }

  return new Intl.NumberFormat('no-NO', {
    style: 'decimal',
    maximumFractionDigits: 0,
  }).format(value);
};
